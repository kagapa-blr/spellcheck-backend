import{a as r,j as e}from"./react-DbtEuUu-.js";import{u as Y,c as H}from"./index-DwZgtdVd.js";import{a as J,r as A,s as K}from"./manageUserAddedWords-BWvlLOmb.js";import{g as Q,T as l,P as V,w as X,S as Z,v as _,a as n,x as $,t as b}from"./@mui-WRar2ve3.js";import"./react-dom-DcXkIZDy.js";import"./scheduler-CWG1rEj-.js";import"./jspdf-DEnQ8Zhn.js";import"./@babel-BUfJX6lK.js";import"./fflate-B2WnmEVw.js";import"./fast-png-RHEe-ix0.js";import"./iobuffer-BmLRrqXH.js";import"./pako-n3Pgozwg.js";import"./react-router-dom-Cm8LtOuy.js";import"./react-router-ChRMN3_C.js";import"./@remix-run-sy-dwM7X.js";import"./axios-C0Zqfgkc.js";import"./clsx-B-dksMZM.js";import"./prop-types-Bw6xMO8O.js";import"./reselect-HBGHfvfV.js";import"./react-is-Rj29YxKv.js";import"./@emotion-CK8GFU5m.js";import"./hoist-non-react-statics-BTNdDy0I.js";import"./stylis-YG1R7XFf.js";import"./@popperjs-DC5wud4b.js";import"./react-transition-group-DV1q_uKQ.js";const Ae=()=>{const{language:t}=Y(),{loggedUser:M}=H(),[p,N]=r.useState([]),[R,k]=r.useState(0),[c,B]=r.useState(10),[h,x]=r.useState(0),[g,q]=r.useState(""),[v,D]=r.useState(""),[I,w]=r.useState(!0),[y,j]=r.useState(null),[i,S]=r.useState([]),[O,C]=r.useState([]),[T,L]=r.useState(""),[W,d]=r.useState(""),[P,m]=r.useState(!1),[U,u]=r.useState(!1),o={en:{userAddedWords:"User Added Words",saveButton:"Save Words to Dictionary",removeButton:"Remove Words",loading:"Loading...",noData:"No data available.",confirmRemove:"Are you sure you want to remove the selected words?",confirmSave:"Are you sure you want to save the selected words?",yes:"Yes",no:"No",search:"Search word...",searchBtn:"Search",wordsColoumn:"Word",frequencyColoumn:"Frequency"},kn:{userAddedWords:"ಬಳಕೆದಾರರು ಸೇರಿಸಿದ ಪದಗಳು",saveButton:"ಪದಗಳನ್ನು ನಿಘಂಟಿನಲ್ಲಿ ಸೇರಿಸಿ",removeButton:"ಪದಗಳನ್ನು ತೆಗೆದುಹಾಕಿ",loading:"ಲೋಡ್ ಆಗುತ್ತಿದೆ...",noData:"ದತ್ತಾಂಶ ಲಭ್ಯವಿಲ್ಲ.",confirmRemove:"ನೀವು ಆಯ್ಕೆಯಾದ ಪದಗಳನ್ನು ತೆಗೆದುಹಾಕಲು ಖಚಿತವಲ್ಲವೇ?",confirmSave:"ನೀವು ಆಯ್ಕೆ ಮಾಡಿದ ಪದಗಳನ್ನು ಉಳಿಸಲು ಖಚಿತವಲ್ಲವೇ?",yes:"ಹೌದು",no:"ಇಲ್ಲ",search:"ಪದ ಹುಡುಕಿ...",searchBtn:"ಹುಡುಕಿ",wordsColoumn:"ಪದಗಳು",frequencyColoumn:"ಆವರ್ತನೆ"}},f=async()=>{w(!0),j(null);try{const s=await J({limit:c,offset:h*c,search:v});N(s?.data||[]),k(s?.total||0),L(M),S([]),C([])}catch(s){j(s?.response?.data?.detail||s.message||"Failed to load data")}finally{w(!1)}};r.useEffect(()=>{f()},[h,c,v]);const z=()=>{x(0),D(g.trim())},E=async()=>{try{const s=p.filter(a=>i.includes(a.word)).map(a=>({word:a.word,frequency:a.frequency}));await K(s,T),await A(i),u(!1),d("Words saved successfully!"),f()}catch(s){d(s?.response?.data?.detail||s.message)}},F=async()=>{try{await A(i),m(!1),d("Words removed successfully!"),f()}catch(s){d(s?.response?.data?.detail||s.message)}},G=[{field:"word",headerName:o[t].wordsColoumn,flex:1},{field:"frequency",headerName:o[t].frequencyColoumn,width:120}];return I?e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen",children:[e.jsx(Q,{}),e.jsx(l,{mt:2,children:o[t].loading})]}):e.jsxs(V,{className:"p-6 max-w-6xl mx-auto mt-6",children:[e.jsx(l,{variant:"h4",textAlign:"center",mb:2,children:o[t].userAddedWords}),y&&e.jsx(X,{severity:"error",sx:{mb:2},children:y}),e.jsxs(Z,{direction:"row",spacing:2,mb:2,children:[e.jsx(_,{fullWidth:!0,size:"small",label:o[t].search,value:g,onChange:s=>q(s.target.value)}),e.jsx(n,{variant:"contained",onClick:z,children:o[t].searchBtn})]}),e.jsx("div",{style:{height:520,width:"100%"},children:e.jsx("div",{style:{height:520,width:"100%"},children:e.jsx($,{rows:p||[],columns:G||[],getRowId:s=>s.word,checkboxSelection:!0,disableRowSelectionOnClick:!0,paginationMode:"server",rowCount:R||0,pageSizeOptions:[10,20,50,100],paginationModel:{page:h,pageSize:c},onPaginationModelChange:s=>{x(s.page),B(s.pageSize)},rowSelectionModel:O||[],onRowSelectionModelChange:s=>{const a=Array.isArray(s)?s:Array.from(s||[]);C(a),S(a)},localeText:{noRowsLabel:o[t].noData}})})}),e.jsxs("div",{className:"flex justify-center gap-4 mt-4",children:[e.jsx(n,{variant:"contained",disabled:i.length===0,onClick:()=>u(!0),children:o[t].saveButton}),e.jsx(n,{variant:"contained",color:"error",disabled:i.length===0,onClick:()=>m(!0),children:o[t].removeButton})]}),e.jsx(b,{open:P,onClose:()=>m(!1),children:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg max-w-md w-full",children:[e.jsx(l,{children:o[t].confirmRemove}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsx(n,{onClick:F,children:o[t].yes}),e.jsx(n,{onClick:()=>m(!1),children:o[t].no})]})]})})}),e.jsx(b,{open:U,onClose:()=>u(!1),children:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg max-w-md w-full",children:[e.jsx(l,{children:o[t].confirmSave}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsx(n,{onClick:E,children:o[t].yes}),e.jsx(n,{onClick:()=>u(!1),children:o[t].no})]})]})})}),W&&e.jsx(l,{textAlign:"center",mt:2,color:"success.main",children:W})]})};export{Ae as default};
