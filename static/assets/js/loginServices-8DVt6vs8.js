import{b as n}from"./index-CKbVKAJQ.js";import{j as p}from"./jwt-decode-VWaDGczM.js";const t={loginApi:"/user/api/v1/login",signUpApi:"/user/api/v1/signup"},c=async(r,s)=>{try{const e=await n.post(t.loginApi,{username:r,password:s}),{access_token:o,token_type:a}=e.data,i=p(o).sub;return{access_token:o,token_type:a,logged_user:i}}catch(e){throw e.response?{message:e.response.data.message||e.response.data.detail||"Login failed",status:e.response.status,raw:e.response.data}:e.request?{message:"No response from server",raw:null}:{message:"Error during login: "+e.message,raw:null}}},u=async r=>{try{return(await n.post(t.signUpApi,r)).data}catch(s){throw s.response?new Error(s.response.data.detail||"Signup failed ,Please try again later or choose a different username"):s.request?new Error("No response from server"):new Error("Error during signup: "+s.message)}};export{c as l,u as s};
