import{a as r,j as e}from"./react-DbtEuUu-.js";import{B,a as o,y as T,t as D,g as R,k as E,w as O}from"./@mui-Q8RKV1MB.js";import{m as A}from"./mammoth-CIYlVhfb.js";import{b as L}from"./manageUserAddedWords-gVbFv1-O.js";import{u as I}from"./index-gRxKenrh.js";import"./clsx-B-dksMZM.js";import"./react-dom-DcXkIZDy.js";import"./scheduler-CWG1rEj-.js";import"./@babel-BUfJX6lK.js";import"./prop-types-Bw6xMO8O.js";import"./reselect-HBGHfvfV.js";import"./react-is-Rj29YxKv.js";import"./@emotion-CK8GFU5m.js";import"./hoist-non-react-statics-BTNdDy0I.js";import"./stylis-YG1R7XFf.js";import"./@popperjs-DC5wud4b.js";import"./react-transition-group-DV1q_uKQ.js";import"./underscore-B70ahWBM.js";import"./bluebird-DN25WtWn.js";import"./base64-js-DRz5BQNA.js";import"./jszip-D7UMlc0L.js";import"./@xmldom-sH5e7RFZ.js";import"./xmlbuilder-Cgaf82qG.js";import"./dingbat-to-unicode-CMGDyNm5.js";import"./lop-7xk04sud.js";import"./option-BZDldvkA.js";import"./jspdf-DEnQ8Zhn.js";import"./fflate-B2WnmEVw.js";import"./fast-png-RHEe-ix0.js";import"./iobuffer-BmLRrqXH.js";import"./pako-n3Pgozwg.js";import"./react-router-dom-Cm8LtOuy.js";import"./react-router-ChRMN3_C.js";import"./@remix-run-sy-dwM7X.js";import"./axios-C0Zqfgkc.js";const be=()=>{const[v,c]=r.useState(!1),[S,f]=r.useState(!1),[l,h]=r.useState(null),[N,i]=r.useState(""),[C,m]=r.useState(!1),[k,g]=r.useState(""),[F,j]=r.useState("success"),{language:s}=I(),[y,d]=r.useState(""),[w,n]=r.useState(""),t={en:{title:"Upload Dataset",confirmTitle:"Confirm Upload",confirmMessage:"Are you sure you want to upload this dataset?",error:"Please select a file before uploading.",uploadingMessage:"Uploading your dataset...",uploadSuccess:"Upload successful!",uploadFailure:"Failed to upload the dataset. Please try again.",cancel:"Cancel",confirm:"Confirm",preview:"Preview",info:"Uploading a file will directly modify the main dictionary. Ensure the dataset is in .txt or .docx format, containing a list of words. Changes may take time to reflect within the system. Please reload the dictionary from the main dashboard after the upload is complete."},kn:{title:"ಡೇಟಾಸೆಟ್ ಅಪ್‌ಲೋಡ್ ಮಾಡಿ",confirmTitle:"ಅಪ್ಲೋಡ್ ದೃಢೀಕರಿಸಿ",confirmMessage:"ಈ ಡೇಟಾಸೆಟ್ ಅನ್ನು ಅಪ್‌ಲೋಡ್ ಮಾಡಲು ನೀವು ಖಚಿತವಾಗಿದ್ದೀರಾ?",error:"ದಯವಿಟ್ಟು ಅಪ್ಲೋಡ್ ಮಾಡುವ ಮೊದಲು ಫೈಲ್ ಅನ್ನು ಆಯ್ಕೆಮಾಡಿ.",uploadingMessage:"ನಿಮ್ಮ ಡೇಟಾಸೆಟ್ ಅನ್ನು ಅಪ್‌ಲೋಡ್ ಮಾಡಲಾಗುತ್ತಿದೆ...",uploadSuccess:"ಅಪ್‌ಲೋಡ್ ಯಶಸ್ವಿ!",uploadFailure:"ಡೇಟಾಸೆಟ್ ಅನ್ನು ಅಪ್‌ಲೋಡ್ ಮಾಡಲು ವಿಫಲವಾಗಿದೆ. ದಯವಿಟ್ಟು ಪುನರಾಯಿಸಲು ಪ್ರಯತ್ನಿಸಿ.",cancel:"ರದ್ದುಮಾಡಿ",confirm:"ದೃಢೀಕರಿಸಿ",preview:"ಪೂರ್ವವೀಕ್ಷಣೆ",info:"ಫೈಲ್ ಅಪ್ಲೋಡ್ ಮಾಡುವುದರಿಂದ ಮುಖ್ಯ ಡಿಕ್ಷನರಿ ನೇರವಾಗಿ ಬದಲಾಯಿಸಲಿದೆ. ಪದಗಳ ಪಟ್ಟಿಯನ್ನು ಹೊಂದಿರುವ ಸರಿಯಾದ ಡೇಟಾಸೆಟ್ ಅನ್ನು .txt ಅಥವಾ .docx ರೂಪದಲ್ಲಿ ಅಪ್‌ಲೋಡ್ ಮಾಡುವುದನ್ನು ಖಚಿತಪಡಿಸಿಕೊಳ್ಳಿ."}},M=a=>{h(a.target.files[0]),i(""),n("")},U=a=>{if(a.preventDefault(),!l){i(t[s].error);return}c(!0)},P=async()=>{if(!l){i(t[s].error);return}try{const a=l.name.split(".").pop().toLowerCase();if(a==="txt"){const p=new FileReader;p.onload=x=>{n(x.target.result),c(!0)},p.readAsText(l)}else if(a==="docx"){const p=await l.arrayBuffer(),x=await A.extractRawText({arrayBuffer:p});n(x.value),c(!0)}else i("Unsupported file format")}catch(a){console.error(a),i("Failed to preview file")}},b=async()=>{f(!0),i(""),d("");try{const a=await L(l);g(a?.message||t[s].uploadSuccess),j("success"),m(!0),d(a?.message||t[s].uploadSuccess)}catch(a){console.error(a),g(t[s].uploadFailure),j("error"),m(!0),d(t[s].uploadFailure)}finally{f(!1),h(null)}},u=()=>{c(!1),n(""),d("")};return e.jsxs("div",{className:"p-4 lg:w-1/2 md:w-2/3 sm:w-full lg:ml-auto lg:mr-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-center",children:t[s].title}),e.jsx(B,{sx:{my:2,p:2,bgcolor:"grey.100",borderRadius:2},children:t[s].info}),e.jsxs("form",{onSubmit:U,className:"mt-10 ml-20 mb-[100%]",children:[e.jsx("input",{type:"file",accept:".txt,.docx",className:"mb-4",onChange:M}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(o,{type:"submit",variant:"contained",startIcon:e.jsx(T,{}),children:"Upload"}),e.jsx(o,{type:"button",variant:"outlined",color:"secondary",onClick:P,children:t[s].preview})]})]}),e.jsx(D,{open:v,onClose:u,children:e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"bg-white p-6 rounded shadow-lg w-[600px] max-w-[95%]",children:S?e.jsxs("div",{className:"text-center",children:[e.jsx(R,{}),e.jsx("p",{className:"mt-3",children:t[s].uploadingMessage})]}):y?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-lg font-bold",children:t[s].uploadSuccess}),e.jsx("p",{className:"mt-2",children:y}),e.jsx(o,{onClick:u,className:"mt-4",children:"OK"})]}):w?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Preview"}),e.jsx("div",{className:"border p-2 max-h-[300px] overflow-y-auto whitespace-pre-wrap text-sm bg-gray-50",children:w.slice(0,5e3)}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Showing first 5000 characters only"}),e.jsxs("div",{className:"mt-4 flex gap-3",children:[e.jsx(o,{onClick:b,color:"primary",children:t[s].confirm}),e.jsx(o,{onClick:()=>n(""),color:"secondary",children:"Back"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-lg font-bold",children:t[s].confirmTitle}),e.jsx("p",{className:"mt-2",children:t[s].confirmMessage}),e.jsx("p",{className:"text-red-600",children:N}),e.jsxs("div",{className:"mt-4 flex gap-3",children:[e.jsx(o,{onClick:b,color:"primary",children:t[s].confirm}),e.jsx(o,{onClick:u,color:"secondary",children:t[s].cancel})]})]})})})}),e.jsx(E,{open:C,autoHideDuration:6e3,onClose:()=>m(!1),children:e.jsx(O,{severity:F,onClose:()=>m(!1),children:k})})]})};export{be as default};
