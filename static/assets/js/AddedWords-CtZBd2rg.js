import{a,j as e}from"./react-DbtEuUu-.js";import{u as H,c as J}from"./index-D03kpuHn.js";import{a as K,r as b,s as Q}from"./manageUserAddedWords-3CG6LtWE.js";import{g as V,T as l,P as X,w as Z,S as _,v as $,a as n,x as ee,t as M}from"./@mui-Q8RKV1MB.js";import"./react-dom-DcXkIZDy.js";import"./scheduler-CWG1rEj-.js";import"./jspdf-DEnQ8Zhn.js";import"./@babel-BUfJX6lK.js";import"./fflate-B2WnmEVw.js";import"./fast-png-RHEe-ix0.js";import"./iobuffer-BmLRrqXH.js";import"./pako-n3Pgozwg.js";import"./react-router-dom-Cm8LtOuy.js";import"./react-router-ChRMN3_C.js";import"./@remix-run-sy-dwM7X.js";import"./axios-C0Zqfgkc.js";import"./clsx-B-dksMZM.js";import"./prop-types-Bw6xMO8O.js";import"./reselect-HBGHfvfV.js";import"./react-is-Rj29YxKv.js";import"./@emotion-CK8GFU5m.js";import"./hoist-non-react-statics-BTNdDy0I.js";import"./stylis-YG1R7XFf.js";import"./@popperjs-DC5wud4b.js";import"./react-transition-group-DV1q_uKQ.js";const be=()=>{const{language:t}=H(),{loggedUser:R}=J(),[x,N]=a.useState([]),[k,B]=a.useState(0),[d,q]=a.useState(10),[f,g]=a.useState(0),[v,D]=a.useState(""),[w,P]=a.useState(""),[I,y]=a.useState(!0),[j,S]=a.useState(null),[i,C]=a.useState([]),[O,W]=a.useState([]),[T,F]=a.useState(""),[A,c]=a.useState(""),[L,m]=a.useState(!1),[U,u]=a.useState(!1),o={en:{userAddedWords:"User Added Words",saveButton:"Save Words to Dictionary",removeButton:"Remove Words",loading:"Loading...",noData:"No data available.",confirmRemove:"Are you sure you want to remove the selected words?",confirmSave:"Are you sure you want to save the selected words?",yes:"Yes",no:"No",search:"Search word...",searchBtn:"Search",wordsColoumn:"Word",frequencyColoumn:"Frequency"},kn:{userAddedWords:"ಬಳಕೆದಾರರು ಸೇರಿಸಿದ ಪದಗಳು",saveButton:"ಪದಗಳನ್ನು ನಿಘಂಟಿನಲ್ಲಿ ಸೇರಿಸಿ",removeButton:"ಪದಗಳನ್ನು ತೆಗೆದುಹಾಕಿ",loading:"ಲೋಡ್ ಆಗುತ್ತಿದೆ...",noData:"ದತ್ತಾಂಶ ಲಭ್ಯವಿಲ್ಲ.",confirmRemove:"ನೀವು ಆಯ್ಕೆಯಾದ ಪದಗಳನ್ನು ತೆಗೆದುಹಾಕಲು ಖಚಿತವಲ್ಲವೇ?",confirmSave:"ನೀವು ಆಯ್ಕೆ ಮಾಡಿದ ಪದಗಳನ್ನು ಉಳಿಸಲು ಖಚಿತವಲ್ಲವೇ?",yes:"ಹೌದು",no:"ಇಲ್ಲ",search:"ಪದ ಹುಡುಕಿ...",searchBtn:"ಹುಡುಕಿ",wordsColoumn:"ಪದಗಳು",frequencyColoumn:"ಆವರ್ತನೆ"}},p=async()=>{y(!0),S(null);try{const s=await K({limit:d,offset:f*d,search:w});N(s?.data||[]),B(s?.total||0),F(R),C([]),W([])}catch(s){S(s?.response?.data?.detail||s.message||"Failed to load data")}finally{y(!1)}};a.useEffect(()=>{p()},[f,d,w]);const z=()=>{g(0),P(v.trim())},E=async()=>{try{const s=x.filter(h=>i.includes(h.word)).map(h=>({word:h.word,frequency:h.frequency})),r=await Q(s,T);await b(i),u(!1),c(r?.message||"Words saved successfully!"),p()}catch(s){const r=s?.response?.data?.detail||s?.response?.data?.message||"Failed to save words. Please try again.";c(r)}},G=async()=>{try{const s=await b(i);m(!1),c(s?.message||"Words removed successfully!"),p()}catch(s){const r=s?.response?.data?.detail||s?.response?.data?.message||"Failed to remove words. Please try again.";c(r)}},Y=[{field:"word",headerName:o[t].wordsColoumn,flex:1},{field:"frequency",headerName:o[t].frequencyColoumn,width:120}];return I?e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen",children:[e.jsx(V,{}),e.jsx(l,{mt:2,children:o[t].loading})]}):e.jsxs(X,{className:"p-6 max-w-6xl mx-auto mt-6",children:[e.jsx(l,{variant:"h4",textAlign:"center",mb:2,children:o[t].userAddedWords}),j&&e.jsx(Z,{severity:"error",sx:{mb:2},children:j}),e.jsxs(_,{direction:"row",spacing:2,mb:2,children:[e.jsx($,{fullWidth:!0,size:"small",label:o[t].search,value:v,onChange:s=>D(s.target.value)}),e.jsx(n,{variant:"contained",onClick:z,children:o[t].searchBtn})]}),e.jsx("div",{style:{height:520,width:"100%"},children:e.jsx("div",{style:{height:520,width:"100%"},children:e.jsx(ee,{rows:x||[],columns:Y||[],getRowId:s=>s.word,checkboxSelection:!0,disableRowSelectionOnClick:!0,paginationMode:"server",rowCount:k||0,pageSizeOptions:[10,20,50,100],paginationModel:{page:f,pageSize:d},onPaginationModelChange:s=>{g(s.page),q(s.pageSize)},rowSelectionModel:O||[],onRowSelectionModelChange:s=>{const r=Array.isArray(s)?s:Array.from(s||[]);W(r),C(r)},localeText:{noRowsLabel:o[t].noData}})})}),e.jsxs("div",{className:"flex justify-center gap-4 mt-4",children:[e.jsx(n,{variant:"contained",disabled:i.length===0,onClick:()=>u(!0),children:o[t].saveButton}),e.jsx(n,{variant:"contained",color:"error",disabled:i.length===0,onClick:()=>m(!0),children:o[t].removeButton})]}),e.jsx(M,{open:L,onClose:()=>m(!1),children:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg max-w-md w-full",children:[e.jsx(l,{children:o[t].confirmRemove}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsx(n,{onClick:G,children:o[t].yes}),e.jsx(n,{onClick:()=>m(!1),children:o[t].no})]})]})})}),e.jsx(M,{open:U,onClose:()=>u(!1),children:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg max-w-md w-full",children:[e.jsx(l,{children:o[t].confirmSave}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsx(n,{onClick:E,children:o[t].yes}),e.jsx(n,{onClick:()=>u(!1),children:o[t].no})]})]})})}),A&&e.jsx(l,{textAlign:"center",mt:2,color:"success.main",children:A})]})};export{be as default};
