import{r as s,j as e}from"./react-87inLI7G.js";import{g as O,u as M,d as W}from"./manageUserAddedWords-BslDlIUs.js";import{u as F}from"./index--7QIODA9.js";import{B as i,a as n,T as x,D as L,I as j,E as R,v as T,w as y,x as h}from"./@mui-DHaYuydq.js";import P from"./AddUser-BsBHix8u.js";import"./@xmldom-DBEIMRBk.js";import"./react-dom-CosTHhxT.js";import"./scheduler-CzFDRTuY.js";import"./react-router-dom-DkNWbL0q.js";import"./react-router-zBP4Nj_3.js";import"./@remix-run-kM2C-PwP.js";import"./axios-CCb-kr4I.js";import"./react-is-DUDD-a5e.js";import"./clsx-B-dksMZM.js";import"./@emotion-CqTsbBQu.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./@babel-DuB8yAtz.js";import"./stylis-YPZU7XtI.js";import"./react-transition-group-CJLDkAA4.js";import"./loginServices-C1YJ8FCd.js";import"./jwt-decode-VWaDGczM.js";const oe=()=>{const{language:t}=F(),[b,g]=s.useState([]),[v,A]=s.useState(!0),[p,C]=s.useState(null),[N,o]=s.useState(!1),[w,d]=s.useState(!1),[l,c]=s.useState(null),[D,u]=s.useState(null),[f,S]=s.useState(!1),r={en:{title:"Administrators",addAdmins:"Add New Administrators",hideAdmin:"Hide Add Admin Page",id:"ID",username:"Name",email:"Email",phone:"Phone",loading:"Loading...",error:"Failed to load users",actions:"Actions",save:"Save",cancel:"Cancel",confirmDelete:"Are you sure you want to delete this user?"},kn:{title:"ನಿರ್ವಾಹಕರ ಪಟ್ಟಿ",addAdmins:"ಹೊಸ ನಿರ್ವಾಹಕರನ್ನು ಸೇರಿಸಿ",hideAdmin:"ನಿರ್ವಹಣೆ ಪುಟ ಸೇರಿಸಿ ಮರೆಮಾಡಿ",id:"ಐಡಿ",username:"ಹೆಸರು",email:"ಇಮೇಲ್",phone:"ಫೋನ್",loading:"ಲೋಡ್ ಮಾಡುತ್ತಿದೆ...",error:"ಬಳಕೆದಾರರನ್ನು ಲೋಡ್ ಮಾಡಲಾಗಲಿಲ್ಲ",actions:"ಕ್ರಿಯೆಗಳು",save:"ಸೇವ್",cancel:"ರದ್ದುಮಾಡು",confirmDelete:"ನೀವು ಈ ಬಳಕೆದಾರರನ್ನು ಅಳಿಸಲು ಖಚಿತವಾಗಿದ್ದೀರಾ?"}},m=async()=>{try{const a=await O();g(a)}catch{C(r.en.error)}finally{A(!1)}};s.useEffect(()=>{m()},[]);const E=a=>{c(a),o(!0)},U=a=>{u(a),d(!0)},k=async()=>{if(l)try{await M(l.username,{email:l.email,phone:l.phone}),await m(),o(!1)}catch(a){console.error("Failed to update user:",a)}finally{c(null)}},I=async()=>{try{await W(D),await m(),d(!1)}catch(a){console.error("Failed to delete user:",a)}finally{u(null)}},B=()=>{S(a=>!a)};return v?e.jsx("div",{children:r[t].loading}):p?e.jsx("div",{children:p}):e.jsxs(i,{sx:{display:"flex",flexDirection:"column",padding:2,marginBottom:10},children:[e.jsx(n,{variant:"contained",color:"primary",onClick:B,sx:{mb:2},children:f?r[t].hideAdmin:r[t].addAdmins}),f&&e.jsx(P,{fetchUsers:m}),e.jsxs(i,{sx:{flex:1,display:"flex",flexDirection:"column",mt:2},children:[e.jsx(x,{variant:"h4",align:"center",gutterBottom:!0,children:r[t].title}),e.jsx(L,{}),e.jsx(i,{mt:2,children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-4 py-2",children:r[t].id}),e.jsx("th",{className:"border px-4 py-2",children:r[t].username}),e.jsx("th",{className:"border px-4 py-2",children:r[t].phone}),e.jsx("th",{className:"border px-4 py-2",children:r[t].email}),e.jsx("th",{className:"border px-4 py-2",children:r[t].actions})]})}),e.jsx("tbody",{children:b.map(a=>e.jsxs("tr",{className:"hover:bg-gray-300 cursor-pointer transition duration-200",children:[e.jsx("td",{className:"border px-4 py-2",children:a.id}),e.jsx("td",{className:"border px-4 py-2",children:a.username}),e.jsx("td",{className:"border px-4 py-2",children:a.phone}),e.jsx("td",{className:"border px-4 py-2",children:a.email}),e.jsxs("td",{className:"border px-4 py-2",children:[e.jsx(j,{onClick:()=>E(a),color:"primary","aria-label":"edit",children:e.jsx(R,{})}),e.jsx(j,{onClick:()=>U(a.username),color:"secondary","aria-label":"delete",children:e.jsx(T,{})})]})]},a.id))})]})})]}),e.jsx(y,{open:N,onClose:()=>o(!1),"aria-labelledby":"edit-modal-title","aria-describedby":"edit-modal-description",children:e.jsxs(i,{sx:{padding:4,maxWidth:400,mx:"auto",mt:5,bgcolor:"white",borderRadius:2,boxShadow:3},children:[e.jsx(x,{id:"edit-modal-title",variant:"h6",component:"h2",children:"Edit User"}),e.jsx(h,{label:r[t].username,value:(l==null?void 0:l.username)||"",disabled:!0,fullWidth:!0,margin:"normal"}),e.jsx(h,{label:r[t].phone,value:(l==null?void 0:l.phone)||"",onChange:a=>c({...l,phone:a.target.value}),fullWidth:!0,margin:"normal"}),e.jsx(h,{label:r[t].email,value:(l==null?void 0:l.email)||"",onChange:a=>c({...l,email:a.target.value}),fullWidth:!0,margin:"normal"}),e.jsxs(i,{display:"flex",justifyContent:"flex-end",mt:2,children:[e.jsx(n,{onClick:()=>o(!1),children:r[t].cancel}),e.jsx(n,{variant:"contained",color:"primary",onClick:k,sx:{ml:2},children:r[t].save})]})]})}),e.jsx(y,{open:w,onClose:()=>d(!1),"aria-labelledby":"confirm-delete-modal-title","aria-describedby":"confirm-delete-modal-description",children:e.jsxs(i,{sx:{padding:4,maxWidth:400,mx:"auto",mt:5,bgcolor:"white",borderRadius:2,boxShadow:3},children:[e.jsx(x,{id:"confirm-delete-modal-title",variant:"h6",children:r[t].confirmDelete}),e.jsxs(i,{display:"flex",justifyContent:"flex-end",mt:2,children:[e.jsx(n,{onClick:()=>d(!1),children:r[t].cancel}),e.jsx(n,{variant:"contained",color:"secondary",onClick:I,sx:{ml:2},children:r[t].save})]})]})})]})};export{oe as default};
