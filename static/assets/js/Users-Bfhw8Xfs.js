import{r as l,j as e}from"./react-Bl8E5IuX.js";import{g as O,u as M,d as W}from"./manageUserAddedWords-BlgQ8JjM.js";import{u as F}from"./index-9O4q5W6i.js";import{B as i,a as n,T as p,D as L,I as j,E as R,s as T,t as y,v as h}from"./@mui-BjEdyK66.js";import P from"./AddUser-De2g8pQt.js";import"./@xmldom-BKc_IZtg.js";import"./react-dom-D2p-lIFc.js";import"./scheduler-CWG1rEj-.js";import"./jspdf-CWhYFgit.js";import"./@babel-Bm-97afu.js";import"./fflate-B2WnmEVw.js";import"./fast-png-CMV4RlVR.js";import"./iobuffer-BmLRrqXH.js";import"./react-router-dom-BIFhErXW.js";import"./react-router-DeFDwJHZ.js";import"./@remix-run-DBs3BZwC.js";import"./axios-B9ygI19o.js";import"./react-is-CeStwY2e.js";import"./clsx-B-dksMZM.js";import"./@emotion-DYK3XH82.js";import"./hoist-non-react-statics-BTNdDy0I.js";import"./stylis-DDa9OTMq.js";import"./react-transition-group-CtzHUc09.js";import"./loginServices-QqolE23W.js";import"./jwt-decode-VWaDGczM.js";const pe=()=>{const{language:t}=F(),[b,g]=l.useState([]),[v,A]=l.useState(!0),[x,C]=l.useState(null),[U,o]=l.useState(!1),[N,d]=l.useState(!1),[s,c]=l.useState(null),[D,u]=l.useState(null),[f,w]=l.useState(!1),a={en:{title:"Administrators",addAdmins:"Add New Administrators",hideAdmin:"Hide Add Admin Page",id:"ID",username:"Name",email:"Email",phone:"Phone",loading:"Loading...",error:"Failed to load users",actions:"Actions",save:"Save",cancel:"Cancel",confirmDelete:"Are you sure you want to delete this user?"},kn:{title:"ನಿರ್ವಾಹಕರ ಪಟ್ಟಿ",addAdmins:"ಹೊಸ ನಿರ್ವಾಹಕರನ್ನು ಸೇರಿಸಿ",hideAdmin:"ನಿರ್ವಹಣೆ ಪುಟ ಸೇರಿಸಿ ಮರೆಮಾಡಿ",id:"ಐಡಿ",username:"ಹೆಸರು",email:"ಇಮೇಲ್",phone:"ಫೋನ್",loading:"ಲೋಡ್ ಮಾಡುತ್ತಿದೆ...",error:"ಬಳಕೆದಾರರನ್ನು ಲೋಡ್ ಮಾಡಲಾಗಲಿಲ್ಲ",actions:"ಕ್ರಿಯೆಗಳು",save:"ಸೇವ್",cancel:"ರದ್ದುಮಾಡು",confirmDelete:"ನೀವು ಈ ಬಳಕೆದಾರರನ್ನು ಅಳಿಸಲು ಖಚಿತವಾಗಿದ್ದೀರಾ?"}},m=async()=>{try{const r=await O();g(r)}catch{C(a.en.error)}finally{A(!1)}};l.useEffect(()=>{m()},[]);const S=r=>{c(r),o(!0)},E=r=>{u(r),d(!0)},k=async()=>{if(s)try{await M(s.username,{email:s.email,phone:s.phone}),await m(),o(!1)}catch(r){console.error("Failed to update user:",r)}finally{c(null)}},I=async()=>{try{await W(D),await m(),d(!1)}catch(r){console.error("Failed to delete user:",r)}finally{u(null)}},B=()=>{w(r=>!r)};return v?e.jsx("div",{children:a[t].loading}):x?e.jsx("div",{children:x}):e.jsxs(i,{sx:{display:"flex",flexDirection:"column",padding:2,marginBottom:10},children:[e.jsx(n,{variant:"contained",color:"primary",onClick:B,sx:{mb:2},children:f?a[t].hideAdmin:a[t].addAdmins}),f&&e.jsx(P,{fetchUsers:m}),e.jsxs(i,{sx:{flex:1,display:"flex",flexDirection:"column",mt:2},children:[e.jsx(p,{variant:"h4",align:"center",gutterBottom:!0,children:a[t].title}),e.jsx(L,{}),e.jsx(i,{mt:2,children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-4 py-2",children:a[t].id}),e.jsx("th",{className:"border px-4 py-2",children:a[t].username}),e.jsx("th",{className:"border px-4 py-2",children:a[t].phone}),e.jsx("th",{className:"border px-4 py-2",children:a[t].email}),e.jsx("th",{className:"border px-4 py-2",children:a[t].actions})]})}),e.jsx("tbody",{children:b.map(r=>e.jsxs("tr",{className:"hover:bg-gray-300 cursor-pointer transition duration-200",children:[e.jsx("td",{className:"border px-4 py-2",children:r.id}),e.jsx("td",{className:"border px-4 py-2",children:r.username}),e.jsx("td",{className:"border px-4 py-2",children:r.phone}),e.jsx("td",{className:"border px-4 py-2",children:r.email}),e.jsxs("td",{className:"border px-4 py-2",children:[e.jsx(j,{onClick:()=>S(r),color:"primary","aria-label":"edit",children:e.jsx(R,{})}),e.jsx(j,{onClick:()=>E(r.username),color:"secondary","aria-label":"delete",children:e.jsx(T,{})})]})]},r.id))})]})})]}),e.jsx(y,{open:U,onClose:()=>o(!1),"aria-labelledby":"edit-modal-title","aria-describedby":"edit-modal-description",children:e.jsxs(i,{sx:{padding:4,maxWidth:400,mx:"auto",mt:5,bgcolor:"white",borderRadius:2,boxShadow:3},children:[e.jsx(p,{id:"edit-modal-title",variant:"h6",component:"h2",children:"Edit User"}),e.jsx(h,{label:a[t].username,value:s?.username||"",disabled:!0,fullWidth:!0,margin:"normal"}),e.jsx(h,{label:a[t].phone,value:s?.phone||"",onChange:r=>c({...s,phone:r.target.value}),fullWidth:!0,margin:"normal"}),e.jsx(h,{label:a[t].email,value:s?.email||"",onChange:r=>c({...s,email:r.target.value}),fullWidth:!0,margin:"normal"}),e.jsxs(i,{display:"flex",justifyContent:"flex-end",mt:2,children:[e.jsx(n,{onClick:()=>o(!1),children:a[t].cancel}),e.jsx(n,{variant:"contained",color:"primary",onClick:k,sx:{ml:2},children:a[t].save})]})]})}),e.jsx(y,{open:N,onClose:()=>d(!1),"aria-labelledby":"confirm-delete-modal-title","aria-describedby":"confirm-delete-modal-description",children:e.jsxs(i,{sx:{padding:4,maxWidth:400,mx:"auto",mt:5,bgcolor:"white",borderRadius:2,boxShadow:3},children:[e.jsx(p,{id:"confirm-delete-modal-title",variant:"h6",children:a[t].confirmDelete}),e.jsxs(i,{display:"flex",justifyContent:"flex-end",mt:2,children:[e.jsx(n,{onClick:()=>d(!1),children:a[t].cancel}),e.jsx(n,{variant:"contained",color:"secondary",onClick:I,sx:{ml:2},children:a[t].save})]})]})})]})};export{pe as default};
